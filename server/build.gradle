plugins {
    id 'war'
    id 'java'
    id "com.bmuschko.docker-remote-api" version "5.3.0"
}

dependencies {
    // The following dependencies will be the ear modules and
    // will be placed in the ear root
    // deploy project(':war')

    // The following dependencies will become ear libs and will
    // be placed in a dir configured via the libDirName property
    // earlib group: 'log4j', name: 'log4j'
    compile project(':gamelogic')
    compile project(":detectivgame")
    testCompile group: 'junit', name: 'junit', version: '4.11'
    testCompile group: 'junit', name: 'junit', version: '4.12'
    // https://mvnrepository.com/artifact/org.jetbrains/annotations
    compile group: 'org.jetbrains', name: 'annotations', version: '17.0.0'
    // https://mvnrepository.com/artifact/javax.websocket/javax.websocket-api
    providedCompile group: 'javax.websocket', name: 'javax.websocket-api', version: '1.1'
    // https://mvnrepository.com/artifact/com.google.code.gson/gson
    compile group: 'com.google.code.gson', name: 'gson', version: '2.8.6'
    // https://mvnrepository.com/artifact/javax.ejb/javax.ejb-api
    compile group: 'javax.ejb', name: 'javax.ejb-api', version: '3.2.2'
    // https://mvnrepository.com/artifact/javax.persistence/javax.persistence-api
    compile group: 'javax.persistence', name: 'javax.persistence-api', version: '2.2'
}

war{

}

/*
import com.bmuschko.gradle.docker.tasks.image.*
tasks.create('createDockerfile', Dockerfile){
    dependsOn war
    from('jboss/wildfly')
    System.out.println("${project.buildDir.absolutePath}/libs/server-${project.version}.war")
    runCommand("ls -la")
    copyFile("${project.buildDir.absolutePath}\\libs\\server-${project.version}.war", '/opt/jboss/wildfly/standalone/deployments/')
}
task buildImage(type: DockerBuildImage) {
    dependsOn createDockerfile
    dockerFile.set(createDockerfile)
    inputDir.set(project.buildDir)
    tags.add("gradle-p")
}

build.dependsOn buildImage*/
