(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{33:function(e,t,a){},43:function(e,t,a){e.exports=a(66)},48:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n,r=a(1),s=a.n(r),i=a(24),o=a.n(i),c=(a(48),a(7)),l=a(8),u=a(11),h=a(9),d=a(6),m=a(10);!function(e){e[e.LOGIN=0]="LOGIN",e[e.GAME=1]="GAME",e[e.GAMEOVER=2]="GAMEOVER",e[e.CONNECTING=3]="CONNECTING"}(n||(n={}));var f=a(13),v=a.n(f),p=a(21);function g(e){return"object"===typeof e&&void 0!==e.onChatChange}function E(e){return"object"===typeof e&&void 0!==e.onChatChange&&void 0!==e.onMessage}var b=function(){function e(t){Object(c.a)(this,e),this.messages=void 0,this.partner=void 0,this.chatId=void 0,this.chatId=t.chatId,this.partner=t.partner,this.messages=[]}return Object(l.a)(e,[{key:"addMessage",value:function(e){this.messages=this.messages.sort((function(e,t){return e.created.unix()-t.created.unix()})),this.messages.push(e)}},{key:"getLastMessage",value:function(){return this.messages.length>0?this.messages[this.messages.length-1]:null}},{key:"unreadMessages",get:function(){var e=0;return this.messages.forEach((function(t){t.userHasRead||e++})),e}}]),e}(),w=a(17),y=a.n(w),k=function e(t){Object(c.a)(this,e),this.id=void 0,this.text=void 0,this.image=void 0,this.isAnswer=void 0,this.answers=void 0,this.userHasRead=void 0,this.created=void 0,this.id=t.id,this.text=t.text,this.image=t.image,this.isAnswer=t.isAnswer,this.answers=t.answers,this.userHasRead=t.userHasRead,this.created=y()(t.created).locale("de")};function C(e){var t=e;return void 0!==t.onError&&"function"===typeof t.onError}var O=function(){function e(){Object(c.a)(this,e),this.lastNotification=void 0,void 0!==Notification&&"granted"!==Notification.permission&&Notification.requestPermission()}return Object(l.a)(e,[{key:"sendNotification",value:function(e,t){this.isEnabled&&this.allowed&&new Notification(e,{body:t})}},{key:"isEnabled",get:function(){return void 0!==Notification&&"granted"===Notification.permission}},{key:"allowed",get:function(){return void 0===this.lastNotification?(this.lastNotification=y()(),!0):y.a.duration(y()().from(this.lastNotification)).asSeconds()>e.DURATION_BETWEEN_NOTIFICATIONS&&(this.lastNotification=y()(),!0)}}],[{key:"Instance",get:function(){return this.instance||(this.instance=new this)}}]),e}();O.DURATION_BETWEEN_NOTIFICATIONS=10,O.instance=void 0;var N=function(){function e(t){Object(c.a)(this,e),this.chatsListener=void 0,this.chatListener=void 0,this.chats=void 0,this._currentChat=void 0,this.errorHandlers=void 0,this.connectionListener=void 0,this.chatListener=[],this.chatsListener=[],this.chats=[],this.errorHandlers=[],this.connectionListener=t}return Object(l.a)(e,[{key:"sortChats",value:function(){this.chats=this.chats.sort((function(e,t){var a=Number.MAX_VALUE,n=Number.MAX_VALUE;return void 0!==e.getLastMessage()&&(a=e.getLastMessage().created.unix()),void 0!==t.getLastMessage()&&(n=t.getLastMessage().created.unix()),n-a}))}},{key:"initMessages",value:function(){this.sendMessage({command:"Reinit"})}},{key:"attach",value:function(e){E(e)?this.chatListener.push(e):g(e)?this.chatsListener.push(e):C(e)&&this.errorHandlers.push(e)}},{key:"detatch",value:function(e){E(e)?this.chatListener=this.detatchListener(e,this.chatListener):g(e)?this.chatsListener=this.detatchListener(e,this.chatsListener):C(e)&&(this.errorHandlers=this.detatchListener(e,this.errorHandlers))}},{key:"submitAnswer",value:function(e,t,a){var n=e.id;this.sendMessage({command:"SubmitAnswer",answerId:n,chatId:t,messageId:a}),this.onMessage(t,{answers:[],created:y()(),id:n.toString(),isAnswer:!0,image:"",text:e.text,userHasRead:!0})}},{key:"readAllMessages",value:function(){var e=this;if(void 0===this._currentChat)throw new Error("No current Chat.");var t=this._currentChat.messages.filter((function(e){return!e.userHasRead})),a=!0,n=!1,r=void 0;try{for(var s,i=t[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var o=s.value;o.userHasRead=!0,this.sendMessage({command:"ReadMessage",messageId:o.id,chatId:this._currentChat.chatId})}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}this.chatsListener.forEach((function(t){return t.onChatChange(e.chats)}))}},{key:"detatchListener",value:function(e,t){return t.filter((function(t){return t!==e}))}},{key:"onMessage",value:function(e,t){var a,n=this,r=new k(t),s=this.chats.find((function(t){return t.chatId===e}));if(void 0===s)throw new Error("Chat ".concat(e," not found. Fatal Error"));if((a=s).addMessage(r),!t.userHasRead){O.Instance.sendNotification(a.partner.name,t.text);var i=new Audio("eventually.mp3");i.play().then((function(){return i.remove()}))}this.sortChats(),void 0!==this._currentChat&&e===this._currentChat.chatId&&this.chatListener.forEach((function(e){return e.onMessage(n._currentChat,r)})),this.chatsListener.forEach((function(e){return e.onChatChange(n.chats)}))}},{key:"onAnswer",value:function(e,t,a){var n=this,r=this.chats.find((function(t){return t.chatId===e}));if(void 0===r)throw new Error("Chat ".concat(e," not found. Fatal Error"));var s=r.messages.find((function(e){return e.id===t}));if(void 0===s)throw new Error("Message ".concat(t," on Chat ").concat(e," not found. Fatal Error"));s.answers.push(a),void 0!==this._currentChat&&this._currentChat.chatId===e&&this.chatListener.forEach((function(e){return e.onMessage(n._currentChat,s)}))}},{key:"onSocketMessage",value:function(e){var t=this;switch(e.command){case"CreateChat":if(this.chats.push(new b(e.chat)),void 0!==e.chat.messages&&e.chat.messages.length>0){var a=!0,n=!1,r=void 0;try{for(var s,i=e.chat.messages[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var o=s.value;this.onMessage(e.chat.chatId,o)}}catch(c){n=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}this.sortChats(),this.chatsListener.forEach((function(e){return e.onChatChange(t.chats)}));break;case"AddMessage":this.onMessage(e.chatId,e.message);break;case"AddAnswer":this.onAnswer(e.chatId,e.messageId,e.answer);break;case"ChangePoints":this.chatsListener.forEach((function(t){return t.onPointsChange(e)}));break;case"HandleError":this.errorHandlers.forEach((function(t){return t.onError(e.message)}));break;case"WebSocketCreated":console.log("WebSocket erzeugt. Juhu");break;default:throw new Error("The Command ".concat(e.command," is unknown"))}}},{key:"currentChat",get:function(){return this._currentChat},set:function(e){var t=this;this._currentChat=e,void 0!==e&&(this.readAllMessages(),this.chatListener.forEach((function(e){return e.onChatChange(t._currentChat)}))),this.chatsListener.forEach((function(e){return e.onCurrentChatChange(t._currentChat)}))}}]),e}(),M=function(e){function t(e,a,n){var r;return Object(c.a)(this,t),(r=Object(u.a)(this,Object(h.a)(t).call(this,e))).baseUrl=void 0,r.token=void 0,r.wsConnection=void 0,r.baseUrl=a,r.token=n,r}return Object(m.a)(t,e),Object(l.a)(t,[{key:"connect",value:function(){var e=this,t=new URL("".concat(this.baseUrl,"/game/").concat(this.token));t.protocol="ws:";var a=this.onCloseOrError.bind(this);return new Promise((function(n){e.wsConnection=new WebSocket(t.toString()),e.wsConnection.onclose=a,e.wsConnection.onerror=a,e.wsConnection.onmessage=e.onWebSocketMessage.bind(e),e.wsConnection.onopen=function(){console.log("Websocket verbunden!"),n(!0),e.connectionListener.onConnect(e)}}))}},{key:"sendMessage",value:function(e){var t=this;void 0===this.wsConnection||1!==this.wsConnection.readyState?window.setTimeout((function(){return t.sendMessage(e)}),1e3):this.wsConnection.send(JSON.stringify(e))}},{key:"onCloseOrError",value:function(){this.connectionListener.onDisconnect(),console.log("Websocket getrennt. Versuche erneute Verbindung..."),window.setTimeout(this.connect.bind(this),0)}},{key:"onWebSocketMessage",value:function(e){var t=e.data,a=JSON.parse(t);this.onSocketMessage(a)}}]),t}(N),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).intervalId=void 0,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"connect",value:function(){var e=Object(p.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.simulateMessage=this.simulateMessage.bind(this),console.log("Globale Funktion simulateMessage(...) hinzugef\xfcgt"),window.setTimeout(this.quereMessage.bind(this),2e3),this.connectionListener.onConnect(this),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(e){console.log("Nachricht an Server",e)}},{key:"simulateMessage",value:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t.onSocketMessage(e)})):this.onSocketMessage(e)}},{key:"quereMessage",value:function(){for(var e=0;e<5;e++){this.simulateMessage({command:"CreateChat",chat:{chatId:e.toString(),partner:{name:"Kunde "+(e+1),imageUrl:"http://emilcarlsson.se/assets/harveyspecter.png"},messages:[]}});for(var t=0;t<10;t++){var a=Math.random()<.5,n=[];if(!a)for(var r=4*Math.random()+1,s=0;s<r;s++)n.push({id:10*t+s,text:"Antwort "+t+s});this.simulateMessage({command:"AddMessage",chatId:e.toString(),message:{id:(10*e+t).toString(),text:"Hallo Will "+(10*e+t).toString(),image:"",answers:n,userHasRead:!1,created:(new Date).getTime()-99999999,isAnswer:a}})}}this.intervalId=window.setInterval(this.upgradePoints.bind(this),5e3)}},{key:"upgradePoints",value:function(){var e=function(){return Math.round(100*Math.random())};this.simulateMessage({command:"ChangePoints",budget:e(),chefSatisfaction:e(),customerExperience:e()})}}]),t}(N),S=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(c.a)(this,e),this.listener=void 0,this.baseUrl=void 0,this.isTestMode=void 0,this.listener=a,this.baseUrl=t,this.isTestMode=n}return Object(l.a)(e,[{key:"connectToWebSocket",value:function(){var e=Object(p.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.isTestMode?new j(this.listener):new M(this.listener,this.baseUrl,t),e.next=3,a.connect();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(p.a)(v.a.mark((function e(t,a){var n,r,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.baseUrl+"/api/login",r={username:t,password:a},e.next=4,fetch(n,{body:JSON.stringify(r),method:"PUT",headers:{"Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.text();case 7:if(i=e.sent,200!==s.status){e.next=13;break}return e.next=11,this.connectToWebSocket(i);case 11:e.next=14;break;case 13:throw new Error(i);case 14:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(p.a)(v.a.mark((function e(t,a){var n,r,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.baseUrl+"/api/register",r={username:t,password:a},e.next=4,fetch(n,{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.text();case 7:if(i=e.sent,200!==s.status&&204!==s.status){e.next=13;break}return e.next=11,this.login(t,a);case 11:e.next=14;break;case 13:throw new Error(i);case 14:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),L=a(80),A=a(74),I=(a(33),a(67)),x=a(68),H=a(69),W=a(70),T=a(71),P=a(72),B=a(73),U=a(75),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={width:window.innerWidth},a.onSizeChange=a.onSizeChange.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.onSizeChange(),document.getElementsByTagName("body")[0].classList.add("login-register-background"),window.addEventListener("resize",this.onSizeChange)}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].classList.remove("login-register-background"),window.removeEventListener("resize",this.onSizeChange)}},{key:"onSizeChange",value:function(){this.setState({width:window.innerWidth})}},{key:"render",value:function(){return s.a.createElement(I.a,null,s.a.createElement(x.a,{className:"transparent text-center"},s.a.createElement("h2",{className:"display-4 headline-font"},"Life-Work-Balance von William Walker")),s.a.createElement(H.a,{className:(this.state.width>992?"mx-auto w-50":"mx-auto")+" transparent"},s.a.createElement(W.a,null,s.a.createElement(T.a,null,s.a.createElement("h4",{className:""},"login"===this.props.mode&&"Anmelden","register"===this.props.mode&&"Registrieren"))),s.a.createElement(P.a,null,s.a.createElement(B.a,null,s.a.createElement(A.a,{color:"primary",active:"login"===this.props.mode,href:"#/login",tag:"a"},"Anmelden"),s.a.createElement(A.a,{color:"primary",active:"register"===this.props.mode,href:"#/register",tag:"a"},"Registrieren")),s.a.createElement(U.a,null,this.props.children))))}}]),t}(s.a.Component),_=a(76),R=a(77),G=a(78),V=a(79);function F(e){return s.a.createElement(_.a,null,s.a.createElement(R.a,null,e.label),s.a.createElement(G.a,{type:e.type,placeholder:e.placeholder,value:e.value,name:e.name,onChange:(t=e.onValue,function(e){var a=e.target,n={};n[a.name]=a.value,t(n)}),onKeyPress:e.onKeyPress,invalid:void 0!==e.error,autoComplete:e.autoComplete}),void 0!==e.error&&s.a.createElement(V.a,null,e.error));var t}function z(e){void 0===e?e="LWB William Walker":e+=" | LWB William Walker",document.querySelector("title").innerText=e}var K=a(19),J=a(23);function q(e){return function(t){"Enter"===t.key&&e()}}var X=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={busy:!1,username:"",password:""},a.onInput=a.onInput.bind(Object(d.a)(a)),a.onSubmit=a.onSubmit.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onInput",value:function(e){this.setState(e)}},{key:"componentDidMount",value:function(){z("Login")}},{key:"onSubmit",value:function(){var e=Object(p.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({busy:!0,error:void 0}),t=this.state,a=t.username,n=t.password,e.prev=2,e.next=5,this.props.connector.login(a,n);case 5:window.location.href="#/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({busy:!1,error:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(D,{mode:"login"},this.state.error&&s.a.createElement(L.a,{color:"danger"},this.state.error),s.a.createElement(F,{label:"Username",onValue:this.onInput,name:"username",placeholder:"william.walker1",value:this.state.username,type:"text",autoComplete:"username"}),s.a.createElement(F,{label:"Passwort",onValue:this.onInput,name:"password",placeholder:"132456789",value:this.state.password,type:"password",autoComplete:"current-password",onKeyPress:q(this.onSubmit)}),s.a.createElement(A.a,{onClick:this.onSubmit,color:"success",disabled:0===this.state.username.length||0===this.state.password.length},this.state.busy&&s.a.createElement(K.a,{icon:J.b,spin:!0}),"Anmelden"))}}]),t}(s.a.Component),Z="Nutzername darf nicht leer sein",$="Passwort darf nicht leer sein",Q="Passw\xf6rter stimmen nicht \xfcberein",Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={busy:!1,name:"William Walker",username:"",usernameError:Z,password:"",passwordError:$,repeatPassword:""},a.onInput=a.onInput.bind(Object(d.a)(a)),a.onSubmit=a.onSubmit.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){z("Registrieren")}},{key:"onInput",value:function(e){e.repeatPasswordError=void 0,e.passwordError=void 0,e.usernameError=void 0,(void 0!==e.password&&e.password!==this.state.repeatPassword||void 0!==e.repeatPassword&&e.repeatPassword!==this.state.password)&&(e.repeatPasswordError=Q),void 0!==e.password&&e.password.length<1&&(e.passwordError=$),void 0!==e.username&&e.username.length<1&&(e.usernameError=Z),this.setState(e)}},{key:"onSubmit",value:function(){var e=Object(p.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({busy:!0,error:void 0}),t=this.state,a=t.username,n=t.password,e.prev=2,e.next=5,this.props.connector.register(a,n);case 5:window.location.href="#/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({busy:!1,error:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(D,{mode:"register"},this.state.error&&s.a.createElement(L.a,{color:"danger"},this.state.error),s.a.createElement(_.a,null,s.a.createElement(R.a,null,"Name"),s.a.createElement(G.a,{type:"text",value:this.state.name,autoComplete:"off",readOnly:!0})),s.a.createElement(F,{label:"Username",name:"username",placeholder:"william.walker",value:this.state.username,type:"text",onValue:this.onInput,error:this.state.usernameError,autoComplete:"username"}),s.a.createElement(F,{onValue:this.onInput,label:"Passwort",name:"password",placeholder:"12345678",value:this.state.password,type:"password",error:this.state.passwordError,autoComplete:"new-password"}),s.a.createElement(F,{onValue:this.onInput,label:"Passwort wiederholen",name:"repeatPassword",placeholder:"12345678",value:this.state.repeatPassword,type:"password",error:this.state.repeatPasswordError,autoComplete:"new-password",onKeyPress:q(this.onSubmit)}),s.a.createElement(A.a,{color:"success",onClick:this.onSubmit,disabled:!ee(this.state.repeatPasswordError,this.state.passwordError,this.state.usernameError)},this.state.busy&&s.a.createElement(K.a,{icon:J.b,spin:!0}),"Registrieren"))}}]),t}(s.a.Component);function ee(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var n=0,r=t;n<r.length;n++){var s=r[n];if(void 0!==s)return!1}return!0}var te=a(14),ae=a(86),ne=a(81),re=a(82),se=a(83),ie=a(84),oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).interval=0,a.state={lastMessageDifference:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.interval=window.setInterval(this.setDifference.bind(this),6e4)}},{key:"componentDidUpdate",value:function(e,t){t.messageId!==this.props.chat.getLastMessage().id&&this.setDifference()}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval)}},{key:"setCurrentChat",value:function(){this.props.chatsHandler.currentChat=this.props.chat}},{key:"setDifference",value:function(){var e=this.props.chat.getLastMessage();e&&this.setState({lastMessageDifference:e.created.fromNow(),messageId:e.id})}},{key:"render",value:function(){var e=this.props.chat.getLastMessage(),t=null===e?"Keine Nachricht":e.text,a=this.props.chat.unreadMessages,n=s.a.createElement(s.a.Fragment,null);return t.length>23&&(t=t.substr(0,23)+"..."),a>0&&(n=s.a.createElement(ne.a,{color:"primary",pill:!0},a),t=s.a.createElement("strong",null,t)),s.a.createElement(re.a,{onClick:this.setCurrentChat.bind(this),active:this.props.chatsHandler.currentChat===this.props.chat},s.a.createElement("div",{className:"d-flex w-100 justify-content-between"},s.a.createElement(se.a,null,this.props.chat.partner.name),s.a.createElement("small",null,this.state.lastMessageDifference)),s.a.createElement(ie.a,{className:"d-flex w-100 justify-content-between"},t,n))}}]),t}(s.a.Component),ce=a(85);function le(e){var t=e.label,a=e.score,n="primary";return a<=5?n="danger":a<=15?n="warning":a>=70?n="success":a>=50&&(n="info"),s.a.createElement("div",null,t,s.a.createElement(ce.a,{color:n,value:a},a))}var ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={chats:[],currentChat:void 0,currentPoints:{chefSatisfaction:0,customerExperience:0,budget:0}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onPointsChange",value:function(e){this.setState({currentPoints:e})}},{key:"onCurrentChatChange",value:function(e){this.setState({currentChat:e})}},{key:"onChatChange",value:function(e){this.setState({chats:e})}},{key:"componentDidMount",value:function(){z("Chats von William Walker"),this.props.chatsHandler.attach(this),this.props.chatsHandler.initMessages()}},{key:"componentWillUnmount",value:function(){this.props.chatsHandler.detatch(this)}},{key:"render",value:function(){var e=this;if(!this.props.isOpen)return s.a.createElement(s.a.Fragment,null);var t=this.state,a=t.chats,n=t.currentPoints;return s.a.createElement(I.a,null,s.a.createElement(H.a,{color:"secondary"},s.a.createElement(P.a,null,s.a.createElement("div",{className:"contact-profile"},s.a.createElement("img",{className:"contact-picture",src:"http://emilcarlsson.se/assets/harveyspecter.png",alt:"William Walker"}),s.a.createElement("div",{className:"contact-name"},"William Walker")),s.a.createElement("div",{className:"progressbars"},s.a.createElement(le,{label:"Kundenerfahrung",score:n.customerExperience}),s.a.createElement(le,{label:"Chefzufriedenheit",score:n.chefSatisfaction}),s.a.createElement(le,{label:"Firmenbudget",score:n.budget})))),s.a.createElement(ae.a,{className:"chat-list"},a.map((function(t){return s.a.createElement(oe,{chat:t,key:t.chatId,chatsHandler:e.props.chatsHandler})}))))}}]),t}(s.a.Component),he=a(94),de=a(95),me=a(96),fe=a(87),ve=a(88),pe=a(89),ge=a(29),Ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).messagesEnd=void 0,a.state={chat:void 0,openAnswers:!1},a.openAnswers=a.openAnswers.bind(Object(d.a)(a)),a.onAnswerChoose=a.onAnswerChoose.bind(Object(d.a)(a)),a.onSendMessage=a.onSendMessage.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onChatChange",value:function(e){this.setState({chat:e,chosenAnswer:void 0})}},{key:"onMessage",value:function(e,t){this.setState({chat:e,chosenAnswer:void 0})}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"componentDidMount",value:function(){this.props.chatsHandler.attach(this),this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){this.props.chatsHandler.detatch(this),this.scrollToBottom()}},{key:"openAnswers",value:function(){var e=this.state.chat.getLastMessage().answers[0];if(this.setState((function(e){return{openAnswers:!e.openAnswers}})),void 0===this.state.chosenAnswer){var t=void 0===e?void 0:e;this.setState({chosenAnswer:t})}}},{key:"onAnswerChoose",value:function(e){this.setState({chosenAnswer:e,openAnswers:!1})}},{key:"toggleModal",value:function(){this.setState({openAnswers:!this.openAnswers})}},{key:"onSendMessage",value:function(){if(void 0!==this.state.chosenAnswer){var e=this.state.chosenAnswer;this.props.chatsHandler.submitAnswer(e,this.state.chat.chatId,this.state.chat.getLastMessage().id)}}},{key:"ln2br",value:function(e){return{__html:e.replace("\n","<br />")}}},{key:"render",value:function(){var e=this;return void 0===this.state.chat?s.a.createElement(I.a,null,s.a.createElement("div",{className:"contact-profile"},s.a.createElement("img",{className:"contact-picture",alt:""}),s.a.createElement("div",{className:"contact-name"},s.a.createElement("em",null,"Kein Chat ausgew\xe4hlt"))),s.a.createElement("div",{className:"messages col-md-12"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"message"},s.a.createElement("em",null,"Keine Nachrichten"))),s.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))):s.a.createElement(I.a,null,s.a.createElement("div",{className:"contact-profile"},s.a.createElement("img",{className:"contact-picture",src:""!=this.state.chat.partner.imageUrl?this.state.chat.partner.imageUrl:"./default.jpg",alt:""}),s.a.createElement("div",{className:"contact-name"},this.state.chat.partner.name)),s.a.createElement("div",{className:"messages col-md-12"},this.state.chat&&this.state.chat.messages.map((function(t){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"message"},s.a.createElement("div",{className:"bubble"+(t.isAnswer?" reply":" receive")},s.a.createElement("div",{className:"content"},s.a.createElement("p",{dangerouslySetInnerHTML:e.ln2br(t.text)}),s.a.createElement("p",{className:"time"},t.created.isBefore(y()().startOf("day"))&&t.created.format("L"),"\xa0",t.created.format("HH:mm"))))))})),s.a.createElement("div",{style:{float:"left",clear:"both",margin:"10px"},ref:function(t){e.messagesEnd=t}}),this.state.chat.getLastMessage()&&this.state.chat.getLastMessage().answers.length>0?s.a.createElement("div",{className:"row"},s.a.createElement(me.a,{isOpen:this.state.openAnswers,toggle:function(){return e.toggleModal()}},s.a.createElement(fe.a,{toggle:function(){return e.toggleModal()}},"Ihre Antwortm\xf6glichkeiten"),s.a.createElement(ve.a,null,s.a.createElement(ae.a,null,this.state.chat.getLastMessage().answers.map((function(t){return s.a.createElement(re.a,{tag:"button",className:e.state.chosenAnswer===t?"active":"",onClick:function(){return e.onAnswerChoose(t)},id:"answer-"+t.id},t.text)})))),s.a.createElement(pe.a,null,s.a.createElement(A.a,{color:"secondary",onClick:function(){return e.toggleModal()}},"Abbrechen")))):""),s.a.createElement("div",{className:"message-input"},s.a.createElement("div",{className:"row text-center"},s.a.createElement("div",{className:"col-md-1"},s.a.createElement(A.a,{color:"primary",onClick:function(){return console.log("I am useless. :^)")}},s.a.createElement(K.a,{icon:ge.b}))),s.a.createElement("div",{className:"col-md-10"},s.a.createElement("div",{className:"form-control",onClick:this.openAnswers},this.state.chat.getLastMessage().isAnswer?"":this.state.chosenAnswer?this.state.chosenAnswer.text:s.a.createElement("i",null,"Bitte Antwort w\xe4hlen"))),s.a.createElement("div",{className:"col-md-1"},s.a.createElement(A.a,{color:"primary",onClick:this.onSendMessage},s.a.createElement(K.a,{icon:ge.a}))))))}}]),t}(s.a.Component),be=a(90),we=a(91),ye=a(92),ke=a(93);function Ce(e){var t=e.toggleChatsList;return s.a.createElement(be.a,{color:"faded",dark:!0,className:"mb-3"},s.a.createElement(we.a,{href:"#",className:"mr-auto"},"Life-Work-Balance von William Walker"),s.a.createElement(ye.a,null,s.a.createElement(ke.a,{className:"d-md-none"},s.a.createElement(A.a,{color:"primary",onClick:t},"Chatliste"))))}var Oe=a(41),Ne=function(){return s.a.createElement(x.a,null,s.a.createElement("h1",null,s.a.createElement(K.a,{icon:J.a}),"Error 404"),s.a.createElement("p",{className:"lead"},"Die Seite gibt es nicht"),s.a.createElement("p",{className:"lead"},s.a.createElement("a",{href:"#/",color:"primary"},"Zur Startseite")))},Me=function(){return s.a.createElement(x.a,null,s.a.createElement("h1",null,s.a.createElement(K.a,{icon:J.b,spin:!0}),"Die Verbindung wurde unterbrochen."),s.a.createElement("p",{className:"lead"},"Bitte warten Sie bis die Verbindung wiederhergestellt wurde....."))};function je(){return Object(r.useEffect)((function(){return document.getElementsByTagName("body")[0].classList.add("gameover-background"),function(){return document.getElementsByTagName("body")[0].classList.remove("gameover-background")}})),s.a.createElement(I.a,null,s.a.createElement(x.a,{className:"transparent"},s.a.createElement("h1",{className:"display-3"},"GameOver ",s.a.createElement("span",{role:"img"},"\u2620")),"Du wurdest entlassen. ",s.a.createElement("br",null),"Dein Konto wurde gel\xf6scht. Du musst ein neues erstellen um wieder zu spielen",s.a.createElement("p",{className:"lead"},s.a.createElement(A.a,{color:"primary",onClick:function(){return window.location.reload()}},"Neues Leben beginnen"))))}var Se=a(42),Le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={errors:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.chatsHandler.attach(this)}},{key:"componentWillUnmount",value:function(){this.props.chatsHandler.detatch(this)}},{key:"onError",value:function(e){this.setState((function(t){return{errors:[].concat(Object(Se.a)(t.errors),[e])}}))}},{key:"onClose",value:function(){this.setState({errors:[]})}},{key:"render",value:function(){return r.createElement(me.a,{isOpen:this.state.errors.length>0},r.createElement(fe.a,null,"Es sind Fehler aufgetreten"),r.createElement(ve.a,null,"Folgende Fehler sind aufgetreten: ",r.createElement("br",null),this.state.errors.map((function(e){return r.createElement(L.a,{color:"danger",key:e},e)}))),r.createElement(pe.a,null,r.createElement(A.a,{color:"primary",onClick:this.onClose.bind(this)},"Ok")))}}]),t}(r.Component),Ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isChatListOpen:!0,connector:new S("http://localhost:8080/server-1.0-SNAPSHOT",Object(d.a)(a),!1),mode:n.LOGIN},a.renderLoginBody=a.renderLoginBody.bind(Object(d.a)(a)),a.renderNormalBody=a.renderNormalBody.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onConnect",value:function(e){this.setState({chatsHandler:e,mode:n.GAME})}},{key:"onDisconnect",value:function(){this.setState({chatsHandler:void 0,mode:n.CONNECTING})}},{key:"toggleChatsList",value:function(){this.setState((function(e){return{isChatListOpen:!e.isChatListOpen}}))}},{key:"renderLoginBody",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(te.b,{path:"/login",exact:!0,render:function(){return s.a.createElement(X,{connector:e.state.connector})}}),s.a.createElement(te.b,{path:"/register",exact:!0,render:function(){return s.a.createElement(Y,{connector:e.state.connector})}}),s.a.createElement(te.a,{from:"*",to:"/login"}))}},{key:"renderNormalBody",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(te.b,{path:"/",exact:!0},s.a.createElement(he.a,null,s.a.createElement(de.a,{md:4},s.a.createElement(ue,{chatsHandler:this.state.chatsHandler,isOpen:this.state.isChatListOpen})),s.a.createElement(de.a,{md:8},s.a.createElement(Ee,{chatsHandler:this.state.chatsHandler})))),s.a.createElement(Le,{chatsHandler:this.state.chatsHandler}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ce,{toggleChatsList:this.toggleChatsList.bind(this)}),s.a.createElement(I.a,{fluid:!0},s.a.createElement(Oe.a,null,s.a.createElement(te.d,null,this.state.mode===n.LOGIN&&s.a.createElement(this.renderLoginBody,null),this.state.mode===n.GAME&&s.a.createElement(this.renderNormalBody,null),this.state.mode===n.GAMEOVER&&s.a.createElement(je,null),this.state.mode===n.CONNECTING&&s.a.createElement(Me,null),s.a.createElement(te.b,{path:"/404",exact:!0,component:function(){return s.a.createElement(Ne,null)}}),s.a.createElement(te.a,{from:"*",to:"/404"})))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(65);o.a.render(s.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.437cf621.chunk.js.map